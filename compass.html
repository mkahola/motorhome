<!doctype html>
<html>
<head>
    <title>Compass</title>
</head>
<body style="background-color:#323232;">
<div style = "text-align:center;">
<canvas id="compass" width="240" height="240" style="width: 240px; height: 240px;"></canvas>
<script>
function initCompass() {
var gaugeCompass = new RadialGauge({
    renderTo: 'compass',
    minValue: 0,
    maxValue: 360,
    majorTicks: [
        "N",
        "NE",
        "E",
        "SE",
        "S",
        "SW",
        "W",
        "NW",
        "N"
    ],
    minorTicks: 22,
    ticksAngle: 360,
    startAngle: 180,
    strokeTicks: false,
    highlights: false,
    colorPlate: "#33a",
    colorMajorTicks: "#f5f5f5",
    colorMinorTicks: "#ddd",
    colorNumbers: "#ccc",
    colorNeedle: "rgba(240, 128, 128, 1)",
    colorNeedleEnd: "rgba(255, 160, 122, .9)",
    valueBox: false,
    valueTextShadow: false,
    colorCircleInner: "#fff",
    colorNeedleCircleOuter: "#ccc",
    needleCircleSize: 15,
    needleCircleOuter: false,
    animationRule: "linear",
    needleType: "line",
    needleStart: 75,
    needleEnd: 99,
    needleWidth: 3,
    borders: true,
    borderInnerWidth: 0,
    borderMiddleWidth: 0,
    borderOuterWidth: 10,
    colorBorderOuter: "#ccc",
    colorBorderOuterEnd: "#ccc",
    colorNeedleShadowDown: "#222",
    borderShadowWidth: 0,
    animationTarget: "plate",
    units: "·µç",
    title: "Heading",
    fontTitleSize: 19,
    colorTitle: "#f5f5f5",
    animationDuration: 1500
}).draw();
    var ws = new WebSocket("ws://127.0.0.1:5678/");
    ws.onmessage = function (event) {
       const values = event.data.split(",")
       for (let i=0; i < values.length; i++) {
                if (values[i] == "Course") {
                        gaugeCompass.value = values[i+1];
                        break;
                }
        }
    };
}
</script>
<script async src="gauge.min.js" onload="initCompass()"></script>
</div>
</body>
</html>
